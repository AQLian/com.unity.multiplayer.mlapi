{% metadata_file .yamato/project.metafile %}
---
standards_{{ projects.first.name }}:
  name: Standards Check {{ projects.first.name }}
  agent:
    type: Unity::VM
    image: desktop/logging-testing-linux:stable
    flavor: b1.small
  commands:
    - dotnet --version
    - dotnet tool -g install dotnet-format
    - $HOME/.dotnet/tools/dotnet-format --version
    - python3 --version
    - pip install unity-downloader-cli --upgrade --index-url https://artifactory.prd.it.unity3d.com/artifactory/api/pypi/pypi/simple
    - unity-downloader-cli -u {{ test_editors.first }} -c editor --wait --fast
    - .Editor/Unity -batchmode -nographics -logFile - -executeMethod UnityEditor.SyncVS.SyncSolution -projectPath {{ projects.first.path }} -quit
    - $HOME/.dotnet/tools/dotnet-format ./{{ projects.first.path }}/{{ projects.first.path }}.sln --fix-whitespace --fix-style error --check
    # - ./standards.py --check